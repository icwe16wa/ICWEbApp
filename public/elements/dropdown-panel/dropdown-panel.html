<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/paper-menu/paper-menu.html">
<link rel="import" href="../../components/paper-item/paper-item.html">

<polymer-element name="dropdown-panel" attributes="open ajaxify">
    <template>
        <style>
            :host {
                top: 30px !important;
                background: white;
                opacity: 0;
                visibility: hidden;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                /*-webkit-transform: translate3d(0, -6px, 0);*/
                /*-webkit-transition: .04s .08s -webkit-transform, 0.025s .1s opacity;*/
                /*-moz-transform: translate3d(0, -6px, 0);*/
                /*-moz-transition: .04s .08s -moz-transform, 0.025s .1s opacity;*/
                /*transform: translate3d(0, -6px, 0);*/
                /*transition: .04s .08s transform, 0.025s .1s opacity;*/
            }
            :host([open]) {
                opacity: 1;
                visibility: visible;
                /*-webkit-transform: translate3d(0, 0, 0);*/
                /*-webkit-transition: .04s -webkit-transform, 0.025s opacity;*/
                /*-moz-transform: translate3d(0, -6px, 0);*/
                /*-moz-transition: .04s .08s -moz-transform, 0.025s .1s opacity;*/
                /*transform: translate3d(0, 0, 0);*/
                /*transition: .04s transform, 0.025s opacity;*/
            }
            polyfill-next-selector { content: ':host paper-item #label'; }
            ::content paper-item /deep/ #label {
                font-weight: 300;
            }
            polyfill-next-selector { content: ':host paper-item paper-icon'; }
            ::content paper-item::shadow paper-icon {
                background-size: 48px !important;
            }
            polyfill-next-selector { content: ':host paper-item[active]'; }
            ::content paper-item[active] {
                background: rgba(0, 0, 0, 0.04);
                border: 1px solid #d9d9d9;
            }
            :host /deep/ paper-icon {
                margin-right: 6px;
                background-size: 48px !important;
            }
            polyfill-next-selector { content: ':host paper-item'; }
            ::content paper-item {
                font-size: 14px !important;
                font-weight: 500;
                line-height: 32px !important;
            // letter-spacing: 0.01em;
                padding: 0;
                padding-right: 10px;
=                opacity: 0.5;
            }
            polyfill-next-selector { content: ':host paper-item:hover'; }
            ::content paper-item:hover {
                opacity: 0.9;
            }
            polyfill-next-selector { content: ':host paper-item.paper-selected'; }
            ::content paper-item.paper-selected {
                opacity: 1;
            }
        </style>
        <paper-menu id="mainmenu" on-click="{{onClick}}">
            <content></content>
        </paper-menu>
    </template>
    <script>
        Polymer({
            publish: {
                open: {value: false, reflect: true}
            },
            ajaxify: false,
            attached: function() {
                var active = this.querySelector('paper-item[active]');
                var index = Array.prototype.indexOf.call(this.children, active);
                this.$.mainmenu.selected = index;
            },
            openPanel: function() {
                this.open = true;
                var close = function() {
                    this.open = false;
                    document.body.removeEventListener('click', close, true);
                }.bind(this);
                document.body.addEventListener('click', close, true);
            }
        });
    </script>
</polymer-element>