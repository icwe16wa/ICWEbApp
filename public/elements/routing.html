<script src="../components/page/page.js"></script>
<script>
    window.addEventListener('WebComponentsReady', function() {

        // We use Page.js for routing. This is a Micro
        // client-side router inspired by the Express router
        // More info: https://visionmedia.github.io/page.js/

        // Middleware
        function nothingDoNext(ctx, next) {
//            webApp.scrollPageToTop();
            next();
        }

        // Routes
        page('/', nothingDoNext, function() {
            webApp.selected = 0;
        });

        page('/social', nothingDoNext, function() {
            webApp.selected = 1;
//            page.redirect('/#!social');

        });

        page('/sponsors', nothingDoNext, function(data) {
            webApp.selected = 2;
//            page.redirect('/#!sponsors');
        });

        page('/speakers', nothingDoNext, function() {
            webApp.selected = 3;
//            page.redirect('/#!speakers');
        });

        page('/speakers/:id', nothingDoNext, function(data) {
            webApp.speakerNameToView = data.params.id;
            webApp.selected = 6;
        });

        page('/events', nothingDoNext, function(data) {
            webApp.selected = 4;
//            page.redirect('/#!events');
        });

        page('/events/:id', nothingDoNext, function(data) {
            webApp.eventNameToView = data.params.id;
            webApp.selected = 7;
        });

        page('/events/:id/feedback', nothingDoNext, function(data) {
            webApp.$.feedback._id = data.params.id;
            webApp.selected = 8;
        });
        page('/contacts', nothingDoNext, function(data) {
            webApp.selected = 5;
//            page.redirect('/#!contact');
        });

        page('', nothingDoNext, function() {
            webApp.selected = 0;
        });

        page('social', nothingDoNext, function() {
            webApp.selected = 1;
//            page.redirect('/#!social');
        });

        page('sponsors', nothingDoNext, function(data) {
            webApp.selected = 2;
//            page.redirect('/#!sponsors');
        });

        page('speakers', nothingDoNext, function() {
            webApp.selected = 3;
//            page.redirect('/#!speakers');
        });

        page('speakers/:id', nothingDoNext, function(data) {
            webApp.speakerNameToView = data.params.id;
            webApp.selected = 6;
        });

        page('events', nothingDoNext, function(data) {
            webApp.selected = 4;
//            page.redirect('/#!events');
        });

        page('events/:id', nothingDoNext, function(data) {
            webApp.eventNameToView = data.params.id;
            webApp.selected = 7;
        });

        page('events/:id/feedback', nothingDoNext, function(data) {
            webApp.$.feedback._id = data.params.id;
            webApp.selected = 8;
        });

        page('contacts', nothingDoNext, function(data) {
            webApp.selected = 5;
        });

        page('*', function() {
            webApp.$.toast.text = 'Can\'t find: ' + window.location.href  + '. Redirected you to Home Page';
            webApp.$.toast.show();
//            page.redirect('/');
        });

        // add #! before urls
        page({
            hashbang: true
        });

    });
</script>