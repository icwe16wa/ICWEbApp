
<link rel="import" href="../../components/polymer/polymer.html">

<link rel="import" href="../../components/iron-list/iron-list.html">

<link rel="import" href="../../components/paper-button/paper-button.html">
<link rel="import" href="../../components/paper-input/paper-textarea.html">
<link rel="import" href="../../components/iron-form/iron-form.html">
<link rel="import" href="../../components/gold-email-input/gold-email-input.html">
<link rel="import" href="../../elements/star-rating/star-rating.html">
<link rel="import" href="../../components/google-chart/google-chart.html">
<link rel="import" href="../../components/google-chart/google-chart.css">


<script src="../../js/utils.js"></script>

<dom-module id="feedback-review-chart">
    <style>
        code {
            color: #007000;
        }
        google-chart {
            height: 300px;
            width: 400px;
        }
        #selection-demo {
            position: relative;
            height: 300px;
        }
        #selection-chart {
            float: left;
        }
        #selection-display {
            display: inline-block;
            position: relative;
            top: 50%;
        }
    </style>
    <template>
        <h3>Ratings Chart</h3>
        <google-chart
                id='mutating_chart'
                type='column'
                cols='[{"label": "Stars", "type": "string"},{"label": "Ratings", "type": "number"}]'
                rows='{{defi}}'>
        </google-chart>

    </template>

    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'feedback-review-chart',
                properties: {
                    stars:{
                        type : Array,
                        notify: true
                    },
                    defi:{
                        type : Array,
                        computed: '_computeStarsArr(stars)'
                    }
                },
                _log: function(obj){
                    console.log(log)
                },
                _computeStarsArr: function(arr){
                    console.log(arr)
                    var occurencies = [0,0,0,0,0,0];
                    var arrToReturn = [['0 stars'],['1 stars'],['2 stars'],['3 stars'],['4 stars'],['5 stars']]
                    for(var i = 0 ; i < arr.length; i++){
                        if(arr[i].stars==0) {
                            occurencies[0]++
                        } else if (arr[i].stars==1){
                            occurencies[1]++
                        }
                        else if (arr[i].stars==2){
                            occurencies[2]++
                        }
                        else if (arr[i].stars==3){
                            occurencies[3]++
                        }
                        else if (arr[i].stars==4){
                            occurencies[4]++
                        }
                        else if (arr[i].stars==5){
                            occurencies[5]++
                        }
                    }
                    for(var j = 0; j<occurencies.length;j++){
                        arrToReturn[j].push(occurencies[j])
                    }
                    return arrToReturn;
                }
            });
        })();
    </script>

</dom-module>